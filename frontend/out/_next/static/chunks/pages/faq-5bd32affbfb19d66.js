(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{2836:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var s=a(7876),o=a(9099),n=a(6463),i=a(4232),c=a(7328),r=a.n(c),l=a(8815),d=a(6625),u=a(8967),f=a(961),h=a(1492),m=a(8385),p=a(1423);let g=e=>[...e].sort((e,t)=>t.likes!==e.likes?t.likes-e.likes:e.dislikes!==t.dislikes?e.dislikes-t.dislikes:e.question.localeCompare(t.question)),x=e=>{let{data:t,defaultOpenId:a,scrollRef:o}=e,[c,r]=(0,i.useState)(()=>g(t));(0,i.useEffect)(()=>{r(g(t)),a&&t.length>0&&(t.some(e=>e.id.toString()===a)||console.warn("Pergunta com ID ".concat(a," n\xe3o encontrada nos dados")))},[t,a]);let[l,d]=(0,i.useState)({}),[x,j]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=localStorage.getItem("deviceId")||"";e=e||(0,p.A)(),localStorage.setItem("deviceId",e),j(e);let t=localStorage.getItem("faqVotes");t&&d(JSON.parse(t))},[]);let[q,v]=(0,i.useState)(a);(0,i.useEffect)(()=>{v(a)},[a]);let N=e=>{fetch("".concat(n.J,"/faq/click"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:"http://localhost:3001"},mode:"cors",body:JSON.stringify({faq_question_id:e,timestamp:new Date().toISOString()})}).catch(e=>{console.warn("Erro ao registrar clique na API:",e)})},w=(e,t)=>{l[e]!==t&&(d(a=>{let s={...a,[e]:t};return localStorage.setItem("faqVotes",JSON.stringify(s)),s}),r(a=>g(a.map(a=>{if(a.id!==e)return a;let s=l[e];return s&&s!==t?{...a,[t+"s"]:a[t+"s"]+1,[s+"s"]:Math.max(0,a[s+"s"]-1)}:{...a,[t+"s"]:a[t+"s"]+1}}))),fetch("".concat(n.J,"/faq/vote"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:"http://localhost:3001"},mode:"cors",body:JSON.stringify({faq_question_id:e,reaction:t,user_agent:navigator.userAgent,device_id:x,timestamp:new Date().toISOString()})}).catch(e=>{console.warn("Erro ao registrar voto na API:",e)}))};return(0,s.jsx)("section",{id:"faq",className:"faq",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"faq-container",children:(0,s.jsxs)(u.bL,{type:"single",collapsible:!0,value:q,onValueChange:v,className:"accordion-container",children:[0===c.length&&(0,s.jsx)("div",{style:{textAlign:"center",color:"#888",margin:"40px 0"},children:"Nenhuma pergunta encontrada."}),c.map(e=>(0,s.jsxs)(u.q7,{value:String(e.id),id:"faq-item-".concat(e.id),ref:e.id.toString()===a?o:void 0,className:"faq-item",style:{scrollMarginTop:"190px"},children:[(0,s.jsxs)(u.Y9,{className:"faq-header",children:[(0,s.jsx)(u.l9,{className:"faq-trigger",onClick:()=>N(e.id),children:e.question}),(0,s.jsxs)("div",{className:"faq-vote-buttons",children:[(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),w(e.id,"like")},className:"vote-button like ".concat("like"===l[e.id]?"active":""),"aria-label":"Like",children:[(0,s.jsx)(f.A,{size:18})," ",(0,s.jsx)("span",{children:e.likes})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),w(e.id,"dislike")},className:"vote-button dislike ".concat("dislike"===l[e.id]?"active":""),"aria-label":"Dislike",children:(0,s.jsx)(h.A,{size:18})})]})]}),(0,s.jsx)(u.UC,{className:"faq-content",children:(0,s.jsx)(m.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3,ease:"easeInOut"},children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e.answer},className:"faq-answer"})})})]},e.id))]})})})})};var j=a(1067);function q(){let e=(0,o.useRouter)(),t=Array.isArray(e.query.id)?e.query.id[0]:e.query.id,a=(0,i.useRef)(null),c=(0,i.useRef)(null),[u,f]=(0,i.useState)([]);(0,i.useEffect)(()=>{!async function(){try{let e=await fetch("".concat(n.J,"/faq/questions"));if(!e.ok)throw Error("Erro ao buscar dados do FAQ");let t=await e.json();f(t)}catch(e){f([]),console.error("[FAQ] Erro ao buscar dados:",e)}}()},[]);let h=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{h.current=!1},[t]),(0,i.useEffect)(()=>{t&&u.length>0&&!h.current&&(h.current=!0,setTimeout(()=>{let e=document.getElementById("faq-item-".concat(t));if(e){let a=e.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:a,behavior:"smooth"}),console.log("Rolando at\xe9 a pergunta ID ".concat(t," com offset de ").concat(100,"px"))}else if(a.current){let e=a.current.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:e,behavior:"smooth"}),console.log("Usando scrollRef para rolar at\xe9 a pergunta ID ".concat(t," com offset de ").concat(100,"px"))}},500))},[t,u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Perguntas Frequentes - HeRa-i"})}),(0,s.jsx)(l.A,{}),(0,s.jsx)("section",{className:"section faq",style:{padding:"142px 0"},children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl px-4",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(j.A,{ref:c})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:(0,s.jsx)(x,{data:u,defaultOpenId:t,scrollRef:a})}),(0,s.jsx)("div",{className:"mt-10 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["N\xe3o encontrou o que procurava? ",(0,s.jsx)("a",{href:"/contact",className:"text-purple-600 hover:text-purple-800 font-medium",children:"Entre em contato conosco"}),"."]})})]})}),(0,s.jsx)(d.A,{})]})}},2924:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/faq",function(){return a(2836)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[701,92,756,819,82,636,593,792],()=>t(2924)),_N_E=e.O()}]);