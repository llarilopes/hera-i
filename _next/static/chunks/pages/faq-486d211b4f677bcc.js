(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{2836:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(7876),o=a(9099),n=a(4232),i=a(7328),r=a.n(i),l=a(8815),c=a(6625),d=a(8967),u=a(961),h=a(1492),f=a(8385),p=a(1423);let m=e=>[...e].sort((e,t)=>t.likes!==e.likes?t.likes-e.likes:e.dislikes!==t.dislikes?e.dislikes-t.dislikes:e.question.localeCompare(t.question)),g=e=>{let{data:t,defaultOpenId:a,scrollRef:o}=e,[i,r]=(0,n.useState)(()=>m(t));(0,n.useEffect)(()=>{r(m(t)),a&&t.length>0&&(t.some(e=>e.id.toString()===a)||console.warn("Pergunta com ID ".concat(a," n\xe3o encontrada nos dados")))},[t,a]);let[l,c]=(0,n.useState)({}),[g,x]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=localStorage.getItem("deviceId")||"";e=e||(0,p.A)(),localStorage.setItem("deviceId",e),x(e);let t=localStorage.getItem("faqVotes");t&&c(JSON.parse(t))},[]);let[j,q]=(0,n.useState)(a);(0,n.useEffect)(()=>{q(a)},[a]);let v=e=>{fetch("http://localhost:8000/faq/click",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:"http://localhost:3001"},mode:"cors",body:JSON.stringify({faq_question_id:e,timestamp:new Date().toISOString()})}).catch(e=>{console.warn("Erro ao registrar clique na API:",e)})},N=(e,t)=>{l[e]!==t&&(c(a=>{let s={...a,[e]:t};return localStorage.setItem("faqVotes",JSON.stringify(s)),s}),r(a=>m(a.map(a=>{if(a.id!==e)return a;let s=l[e];return s&&s!==t?{...a,[t+"s"]:a[t+"s"]+1,[s+"s"]:Math.max(0,a[s+"s"]-1)}:{...a,[t+"s"]:a[t+"s"]+1}}))),fetch("http://localhost:8000/faq/vote",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:"http://localhost:3001"},mode:"cors",body:JSON.stringify({faq_question_id:e,reaction:t,user_agent:navigator.userAgent,device_id:g,timestamp:new Date().toISOString()})}).catch(e=>{console.warn("Erro ao registrar voto na API:",e)}))};return(0,s.jsx)("section",{id:"faq",className:"faq",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"faq-container",children:(0,s.jsxs)(d.bL,{type:"single",collapsible:!0,value:j,onValueChange:q,className:"accordion-container",children:[0===i.length&&(0,s.jsx)("div",{style:{textAlign:"center",color:"#888",margin:"40px 0"},children:"Nenhuma pergunta encontrada."}),i.map(e=>(0,s.jsxs)(d.q7,{value:String(e.id),id:"faq-item-".concat(e.id),ref:e.id.toString()===a?o:void 0,className:"faq-item",style:{scrollMarginTop:"190px"},children:[(0,s.jsxs)(d.Y9,{className:"faq-header",children:[(0,s.jsx)(d.l9,{className:"faq-trigger",onClick:()=>v(e.id),children:e.question}),(0,s.jsxs)("div",{className:"faq-vote-buttons",children:[(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),N(e.id,"like")},className:"vote-button like ".concat("like"===l[e.id]?"active":""),"aria-label":"Like",children:[(0,s.jsx)(u.A,{size:18})," ",(0,s.jsx)("span",{children:e.likes})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),N(e.id,"dislike")},className:"vote-button dislike ".concat("dislike"===l[e.id]?"active":""),"aria-label":"Dislike",children:(0,s.jsx)(h.A,{size:18})})]})]}),(0,s.jsx)(d.UC,{className:"faq-content",children:(0,s.jsx)(f.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3,ease:"easeInOut"},children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e.answer},className:"faq-answer"})})})]},e.id))]})})})})};var x=a(1067);function j(){let e=(0,o.useRouter)(),t=Array.isArray(e.query.id)?e.query.id[0]:e.query.id,a=(0,n.useRef)(null),i=(0,n.useRef)(null),[d,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/api/faq/questions");if(!e.ok)throw Error("Erro ao buscar dados do FAQ");let t=await e.json();u(t)}catch(e){u([]),console.error("[FAQ] Erro ao buscar dados:",e)}}()},[]);let h=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{h.current=!1},[t]),(0,n.useEffect)(()=>{t&&d.length>0&&!h.current&&(h.current=!0,setTimeout(()=>{let e=document.getElementById("faq-item-".concat(t));if(e){let a=e.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:a,behavior:"smooth"}),console.log("Rolando at\xe9 a pergunta ID ".concat(t," com offset de ").concat(100,"px"))}else if(a.current){let e=a.current.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:e,behavior:"smooth"}),console.log("Usando scrollRef para rolar at\xe9 a pergunta ID ".concat(t," com offset de ").concat(100,"px"))}},500))},[t,d]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Perguntas Frequentes - HeRa-i"})}),(0,s.jsx)(l.A,{}),(0,s.jsx)("section",{className:"section faq",style:{padding:"142px 0"},children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl px-4",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(x.A,{ref:i})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:(0,s.jsx)(g,{data:d,defaultOpenId:t,scrollRef:a})}),(0,s.jsx)("div",{className:"mt-10 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["N\xe3o encontrou o que procurava? ",(0,s.jsx)("a",{href:"/contact",className:"text-purple-600 hover:text-purple-800 font-medium",children:"Entre em contato conosco"}),"."]})})]})}),(0,s.jsx)(c.A,{})]})}},2924:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/faq",function(){return a(2836)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[701,92,756,819,82,636,593,792],()=>t(2924)),_N_E=e.O()}]);